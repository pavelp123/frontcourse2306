function buildForm(e,r,o){const l=document.querySelector(e);if(l){let n=!0;l.addEventListener("submit",async e=>{if(e.preventDefault(),n){const a=await fetch(l.getAttribute("action"),{method:l.getAttribute("method"),body:JSON.stringify(FormData(l))});var{status:e,data:t}=await a.json();(e?r:o)(t)}});const t=l.querySelectorAll(".js-form-field");function s(e,t,a){t?(e.textContent=a,n=!1):e.textContent||(e.textContent="")}t.forEach(e=>{const t=e.querySelector(".js-form-input"),a=e.querySelector(".js-form-status"),{required:n,max:r}=e.dataset;t.addEventListener("blur",()=>{s(a,n&&!t.value,"Это поле обязательно"),s(a,r&&t.value.length>r,`Поле не должно превышать ${r} символов`)}),t.addEventListener("focus",()=>{a.textContent=""})})}}new Swiper(".swiper",{navigation:{nextEl:".default-slider__next",prevEl:".default-slider__prev"}}),function(){const e=document.querySelectorAll(".js-truncate");e.forEach(e=>{var t=parseInt(getComputedStyle(e).lineHeight),a=parseInt(getComputedStyle(e).height),n=e.dataset["lines"],n=t*n;e.style.maxHeight=n+"px",n<=a-t&&e.classList.add("truncate")})}();const handleSuccess=e=>{MicroModal.close(".feedback-modal"),alert(JSON.parse(e))},handleFail=e=>{alert(e)};buildForm(".js-feedback-form",handleSuccess,handleFail);